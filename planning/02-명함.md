# 명함 (Card) 도메인

## 개요
내 디지털 명함 정보 관리 및 QR 코드 생성/공유

---

## 엔티티

### Card
| 필드 | 타입 | 설명 |
|------|------|------|
| id | string | 명함 ID |
| memberId | string | 소유자 ID |
| name | string | 이름 |
| title | string | 직함 |
| company | string | 회사명 |
| phone | string | 전화번호 (nullable) |
| email | string | 이메일 (nullable) |
| bio | string | 자기소개 (nullable) |
| profileImage | string | 프로필 사진 URL (nullable) |
| portfolio | string | 포트폴리오 URL (nullable) |
| location | string | 회사 위치 (nullable) |
| qrImageUrl | string | 생성된 QR 이미지 URL |
| createdAt | datetime | 생성일시 |
| updatedAt | datetime | 수정일시 |

### SocialLink
| 필드 | 타입 | 설명 |
|------|------|------|
| id | string | 링크 ID |
| cardId | string | 명함 ID |
| type | enum | LINKEDIN, INSTAGRAM, GITHUB, TWITTER, FACEBOOK, OTHER |
| url | string | 링크 URL |
| order | number | 표시 순서 |

---

## 규칙 및 정책

### 명함 생성 규칙
| 규칙 | 내용 |
|------|------|
| 생성 시점 | 회원가입 완료 후 필수로 생성 |
| 명함 개수 | 회원당 1개만 생성 가능 |
| 필수 정보 | 이름, 직함, 회사명 |
| 연락처 | 전화번호 또는 이메일 중 최소 1개 필수 |

### 명함 정보 규칙
| 필드 | 규칙 |
|------|------|
| 이름 | 2-30자 |
| 직함 | 2-50자 |
| 회사명 | 2-50자 |
| 전화번호 | 유효한 전화번호 형식 |
| 이메일 | 유효한 이메일 형식 |
| 자기소개 | 최대 300자 |
| 포트폴리오 | 유효한 URL 형식 |
| 위치 | 최대 100자 |

### 프로필 이미지 규칙
| 규칙 | 내용 |
|------|------|
| 파일 형식 | JPG, PNG |
| 최대 크기 | 5MB |
| 권장 비율 | 1:1 (정사각형) |
| 저장 | 리사이징 후 S3 업로드 |

### 소셜 링크 규칙
| 규칙 | 내용 |
|------|------|
| 최대 개수 | 10개 |
| URL 검증 | 유효한 URL 형식 필수 |
| 중복 | 동일 타입 중복 허용 |

### QR 코드 규칙
| 규칙 | 내용 |
|------|------|
| 생성 시점 | 명함 생성 시 자동 생성 |
| URL 형식 | scanly.io/u/{username} |
| 재생성 | username 기반이므로 명함 수정 시에도 재생성 불필요 |
| 오프라인 | 앱에 캐시되어 오프라인에서도 표시 가능 |

### 명함 조회 규칙
| 규칙 | 내용 |
|------|------|
| 비회원 조회 | 가능 (스캔/URL 접속) |
| 저장 | 회원만 가능 |
| 연락처 다운로드 | 비회원도 vCard 다운로드 가능 |

---

## 기능

### 1. 명함 생성
- 회원가입 직후 필수 정보 입력
- 명함 생성 완료 시 QR 코드 자동 생성

### 2. 명함 조회
- 본인 명함 조회
- 타인 명함 조회 (QR 스캔 / URL 접속)

### 3. 명함 수정
- 정보 수정 시 실시간 반영
- QR 코드는 URL 기반이라 재생성 불필요

### 4. QR 코드 공유
- 이미지 저장 (PNG)
- SNS 공유 (카카오톡, 인스타그램 등)
- 링크 복사

---

## 시나리오

### 시나리오 1: 명함 생성 (온보딩)
```
1. 회원가입 완료 후 명함 생성 화면 자동 이동
2. 필수 정보 입력 (이름, 직함, 회사)
3. 연락처 입력 (전화 또는 이메일)
4. [명함 만들기] 클릭
5. QR 코드 자동 생성
6. 홈 화면에 내 명함 + QR 코드 표시
```

### 시나리오 2: 명함 수정
```
1. 홈 → [명함 수정] 클릭
2. 수정할 정보 변경
3. [저장하기] 클릭
4. 즉시 반영
5. 기존 QR 코드로 스캔해도 새 정보 표시
```

### 시나리오 3: 프로필 사진 등록
```
1. 명함 수정 → [사진 변경] 클릭
2. 갤러리에서 선택 또는 카메라 촬영
3. 크롭/편집 화면
4. [완료] 클릭
5. 이미지 업로드 (리사이징 처리)
6. 명함에 사진 표시
```

### 시나리오 4: QR 코드 공유 (오프라인)
```
1. 네트워킹 행사에서 상대방 만남
2. 앱 실행 → 홈 화면의 QR 코드 표시
3. 상대방이 스캔
4. (오프라인이어도 QR 코드는 캐시되어 표시됨)
```

### 시나리오 5: 타인 명함 조회 (비회원)
```
1. 비회원 B가 회원 A의 QR 스캔
2. 앱 미설치 → 웹 브라우저로 이동
3. scanly.io/u/hong 페이지에서 A 명함 조회
4. [연락처 저장] 클릭
5. vCard 다운로드
6. 기기 연락처에 저장
```

### 시나리오 6: 소셜 링크 추가
```
1. 명함 수정 → 소셜 링크 섹션
2. [+ 링크 추가] 클릭
3. 플랫폼 선택 (LinkedIn, GitHub 등)
4. URL 입력
5. [저장하기] 클릭
6. 명함에 소셜 아이콘 표시
```

---

## 화면

### 내 명함 (홈)
```
┌─────────────────────────────┐
│                             │
│     ┌─────────────┐         │
│     │   [QR코드]   │         │
│     └─────────────┘         │
│                             │
│     홍길동                   │
│     Product Manager         │
│     ABC Company             │
│                             │
│  ┌─────────┐ ┌─────────┐   │
│  │  저장   │ │  공유   │   │
│  └─────────┘ └─────────┘   │
│                             │
│       [명함 수정]           │
└─────────────────────────────┘
```

### 명함 수정
```
┌─────────────────────────────┐
│  ← 명함 수정                 │
│                             │
│  [사진 변경]                 │
│                             │
│  ── 필수 정보 ──            │
│  이름 ────────────          │
│  직함 ────────────          │
│  회사 ────────────          │
│  전화 ────────────          │
│  이메일 ──────────          │
│                             │
│  ── 선택 정보 ──            │
│  자기소개 ────────          │
│  포트폴리오 ──────          │
│  회사 위치 ───────          │
│                             │
│  ── 소셜 링크 ──            │
│  🔗 LinkedIn  [삭제]        │
│  🔗 GitHub    [삭제]        │
│  + 링크 추가                 │
│                             │
│       [저장하기]            │
└─────────────────────────────┘
```

### 타인 명함 조회 (스캔 결과)
```
┌─────────────────────────────┐
│     [프로필 사진]            │
│                             │
│     홍길동                   │
│     Product Manager         │
│     ABC Company             │
│                             │
│  📞 010-1234-5678           │
│  ✉️  hong@abc.com            │
│  🔗 linkedin.com/in/hong    │
│                             │
│         ┌─────────┐         │
│         │   저장   │         │
│         └─────────┘         │
└─────────────────────────────┘
```

### 공유 옵션
```
┌─────────────────────────────┐
│  공유하기                    │
│                             │
│  📷 이미지로 저장            │
│  💬 카카오톡                 │
│  📱 인스타그램 스토리        │
│  📋 링크 복사                │
└─────────────────────────────┘
```

---

## API

| Method | Endpoint | 설명 |
|--------|----------|------|
| POST | /api/cards | 명함 생성 |
| GET | /api/cards/me | 내 명함 조회 |
| GET | /api/cards/:username | 타인 명함 조회 |
| PUT | /api/cards/me | 명함 수정 |
| DELETE | /api/cards/me | 명함 삭제 |
| POST | /api/cards/me/image | 프로필 이미지 업로드 |
| DELETE | /api/cards/me/image | 프로필 이미지 삭제 |
| GET | /api/cards/me/qr | QR 이미지 조회 |
| GET | /api/cards/:username/vcard | vCard 다운로드 |

---

## 기술 고려사항

### QR 생성
- 프로필 생성 시 `scanly.io/u/{username}` URL 인코딩
- QR 이미지는 S3에 저장

### 딥링크
- iOS: Universal Links
- Android: App Links
- 앱 미설치 시 웹으로 폴백

### 이미지 처리
- 업로드 시 리사이징 (최대 500x500)
- 썸네일 생성 (100x100)
- WebP 변환으로 용량 최적화

---

## 개발 우선순위
1. Phase 1: 명함 CRUD, QR 생성, 공유
2. Phase 2: 소셜 링크, 프로필 사진, vCard
